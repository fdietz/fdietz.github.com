<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="author" content="Frederik Dietz" />
    <meta keywords="fdietz, ruby, ruby on rails, javascript, react, vue, vuejs, angular.js, angularjs">
    <meta name="description" content="fdietz.github.io">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Vue.js Component Composition with Scoped Slots</title>

    <link href="http://feeds.feedburner.com/fdietz" rel="alternate" title="Frederik Dietz" type="application/atom+xml" />

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
    <link href='//fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="/assets/heki.min-73e17f4d636ce3e5f25cd675dfd20299fef163427edf55d2a4b319062426cd5e.css">
    <link rel="stylesheet" type="text/css" href="/assets/application-14455bbcd6e45416b8f8f887b2ace6000f8857969f5cee0171c326b8893a63f3.css">
  </head>
  <body>
    <div class="fixed">
      <nav class="top-bar">
        <a href="/" class="title">
          <img alt="profile" class="avatar" src="/assets/profile_2018_small-872b831a6df4d9dbedeb190136fbdd9da691aff3ae70a6a7c9575b404d82d6de.jpg">
        </a>
        <ul class="menu">
          <li><a href="/archive.html">archive</a></li>
          <li><a href="/projects.html">projects</a></li>
          <li><a href="/books.html">books</a></li>
          <li><a href="/about.html">about</a></li>
        </ul>
      </nav>
    </div>

    <div class="main-content">
  <div class="post">
    <h2 class="post-title">Vue.js Component Composition with Scoped Slots</h2>
    <h3 class="subheader published">Published 13 Sep 2018</h3>
    <p>In the <a href="/2018/09/05/vue-js-component-composition-with-slots.html">previous post</a> we looked into slots and named slots to compose our components and content in a very flexible way.
There’s one catch though we have not discussed. The content we pass to our slot is in the context of the parent component and not the child component. This sounds quite abstract, let’s build an example component and investigate the problem further!</p>

<h2 id="list-of-items-example">List of Items Example</h2>

<p>Probably the most canonical example for this kind of scenario is a todo list which renders for each todo a checkbox with name.</p>

<figure>
  <img width="50%" alt="Example 1" src="/assets/list-3d2c4519af74f6f3b242312c1d042df4548d6e4bca35a91bf2d938476bb93839.png" />
  <figcaption>Example 1</figcaption>
</figure>

<div>
  <pre data-line=""><code class="language-markup">&lt;div id=&quot;demo&quot;&gt;
  &lt;div class=&quot;list&quot;&gt;
    &lt;div v-for=&quot;item in listItems&quot; key=&quot;item.id&quot; class=&quot;list-item&quot;&gt;
      &lt;input type=&quot;checkbox&quot; v-model=&quot;item.completed&quot; class=&quot;list-item__checkbox&quot; /&gt;
      {{item.name}}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>

<div>
  <pre data-line=""><code class="language-javascript">new Vue({ 
  el: &#39;#demo&#39;,
  data: {
    listItems: [
      {id: 1, name: &quot;item 1&quot;, completed: false},
      {id: 2, name: &quot;item 2&quot;, completed: false},
      {id: 3, name: &quot;item 3&quot;, completed: false}
    ]
  }
});</code></pre>
</div>

<p>In the next step we refactor this code into a reusable list component and our goal is to leave it up to the client of the component to decide what and how to render the list item.</p>

<h2 id="refactor-to-reusable-list-component">Refactor to Reusable List component</h2>

<p>Let’s start with the implementation of the List component:</p>

<div>
  <pre data-line=""><code class="language-javascript">Vue.component(&quot;List&quot;, {
  template: &quot;#template-list&quot;,
  props: {
    items: {
      type: Array, 
      default: []
    }
  }
});</code></pre>
</div>

<div>
  <pre data-line=""><code class="language-markup">&lt;template id=&quot;template-list&quot;&gt;  
  &lt;div class=&quot;list&quot;&gt;
    &lt;div v-for=&quot;item in items&quot; class=&quot;list-item&quot;&gt;
      &lt;slot&gt;&lt;/slot&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;</code></pre>
</div>

<p>Following our previous examples we use the default slot to render a list item.</p>

<p>And now make use of our new component:</p>

<div>
  <pre data-line=""><code class="language-markup">&lt;div id=&quot;demo&quot;&gt;
  &lt;List :items=&quot;listItems&quot;&gt;
    &lt;div class=&quot;list-item&quot;&gt;
      &lt;input type=&quot;checkbox&quot; v-model=&quot;item.completed&quot; class=&quot;list-item__checkbox&quot; /&gt;
      &lt;div class=&quot;list-item__title&quot;&gt;{{item.name}}&lt;/div&gt;
    &lt;/div&gt;
  &lt;/List&gt;
&lt;/div&gt;</code></pre>
</div>

<p>But, when trying this example we run into a Javascript error message:</p>

<div>
  <pre data-line=""><code class="language-markup">ReferenceError: item is not defined</code></pre>
</div>

<p>It seems we cannot access <code>item</code> from our slot content. In fact the content we passed runs in the context of the parent and not the child component <code>List</code>.</p>

<p>Let’s verify this by printing the total number of items in our <code>List</code> component using the <code>listItems</code> data defined in our Vue instance.</p>

<div>
  <pre data-line=""><code class="language-markup">&lt;div id=&quot;demo&quot;&gt;
  &lt;List :items=&quot;listItems&quot;&gt;
    &lt;div class=&quot;list-item&quot;&gt;
      {{listItems}}
    &lt;/div&gt;
  &lt;/List&gt;
&lt;/div&gt;</code></pre>
</div>

<p>That works because we run in the context of the parent component which is in this example the Vue instance. But, how can we pass the <code>item</code> data from our child <code>&lt;List&gt;</code> to our slot? This is where “scoped slots” come to the rescue!</p>

<p>Our component must pass along <code>item</code> as a prop to the slot itself:</p>

<div>
  <pre data-line=""><code class="language-markup">&lt;template id=&quot;template-list&quot;&gt;  
  &lt;div class=&quot;list&quot;&gt;
    &lt;div v-for=&quot;item in items&quot; class=&quot;list-item&quot;&gt;
      &lt;slot :item=&quot;item&quot;&gt;&lt;/slot&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;</code></pre>
</div>

<p>Note, that it is important to pass this with a binding <code>:item</code> instead of only <code>item</code>!</p>

<p>Okay let’s try this again:</p>

<div>
  <pre data-line=""><code class="language-markup">&lt;div id=&quot;demo&quot;&gt;
  &lt;List :items=&quot;listItems&quot;&gt;
    &lt;div slot-scope=&quot;slotProps&quot; class=&quot;list-item&quot;&gt;
      &lt;input type=&quot;checkbox&quot; v-model=&quot;slotProps.item.completed&quot; class=&quot;list-item__checkbox&quot; /&gt;
      &lt;div class=&quot;list-item__title&quot;&gt;{{slotProps.item.name}}&lt;/div&gt;
    &lt;/div&gt;
  &lt;/List&gt;
&lt;/div&gt;</code></pre>
</div>

<p>This time we use the <code>slot-scope</code> attribute and assign the name <code>slotProps</code> to it. Inside this scoped slot we can access all props passed along via this <code>slotProps</code> variable.</p>

<p>In Vue.js 2.5.0+, scope is no longer limited to the <code>&lt;template&gt;</code> element, but can instead be used on any element or component in the slot.</p>

<h2 id="extending-the-rendering-of-the-list-item">Extending the rendering of the list item</h2>

<p>Now that we know how to pass data along we are free to extend the list item with some new functionality without changing the List component. It would be awesome if we could remove a todo item!</p>

<p>First of all we define the Vue app with a method to remove a todo item:</p>

<div>
  <pre data-line=""><code class="language-javascript">new Vue({ 
  el: &#39;#demo&#39;,
  data: {
    listItems: [
      {id: 1, name: &quot;item 1&quot;, completed: false},
      {id: 2, name: &quot;item 2&quot;, completed: false},
      {id: 3, name: &quot;item 3&quot;, completed: false}
    ]
  },
  methods: {
    remove(item) {
      this.listItems.splice(this.listItems.indexOf(item), 1);
    }
  }
});</code></pre>
</div>

<p>We use the Javascript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice">splice</a> function to remove the item using it’s index from <code>listItems</code>.</p>

<p>Next, we use this method when rendering the list item:</p>

<div>
  <pre data-line=""><code class="language-markup">&lt;template slot-scope=&quot;slotProps&quot; class=&quot;list-item&quot;&gt;
  &lt;input type=&quot;checkbox&quot; v-model=&quot;slotProps.item.completed&quot; class=&quot;list-item__checkbox&quot; /&gt;
  &lt;div class=&quot;list-item__title&quot;&gt;{{slotProps.item.name}}&lt;/div&gt;
  &lt;button @click=&quot;remove(slotProps.item)&quot; class=&quot;list-item__remove&quot;&gt;×&lt;/button&gt;
&lt;/template&gt;</code></pre>
</div>

<p>We add a button with a <code>click</code> event which calls our previously defined <code>remove</code> function. That’s it!</p>

<h2 id="using-destructuring-for-the-slot-scope">Using Destructuring for the <code>slot-scope</code></h2>

<p>We can further simplify this template by using a modern Javascript trick on the <code>slot-scope</code> attribute.</p>

<p>Here’s an example of using Javascript “destructuring” to access an attribute of an object:</p>

<div>
  <pre data-line=""><code class="language-javascript">const item = slotProps.item;
// same as 
const { item } = slotProps;</code></pre>
</div>

<p>Instead of using the value <code>slotProps</code> we can now access the <code>item</code> directly.</p>

<p>Let’s use this in our template:</p>

<div>
  <pre data-line=""><code class="language-markup">&lt;template slot-scope=&quot;{item}&quot; class=&quot;list-item&quot;&gt;
  &lt;input type=&quot;checkbox&quot; v-model=&quot;item.completed&quot; class=&quot;list-item__checkbox&quot; /&gt;
  &lt;div class=&quot;list-item__title&quot;&gt;{{item.name}}&lt;/div&gt;
  &lt;button @click=&quot;remove(item)&quot; class=&quot;list-item__remove&quot;&gt;×&lt;/button&gt;
&lt;/template&gt;</code></pre>
</div>

<p>This is easier to read because we can directly use the <code>item</code> variable instead of always going via <code>slotProps.item</code>.</p>

<h2 id="summary">Summary</h2>

<p>In this chapter we used scoped slots to allow the parent to access data from the child. This gives us lots of new possibilities which weren’t possible before. This feature is especially useful in scenarios where you want to leave the rendering of the slot content to the user of the component. In our case the list component is very reusable by decoupling the rendering of the list items.</p>

<p>You can find the complete examples on <a href="https://github.com/fdietz/vue_components_book_examples/tree/master/chapter-4">Github</a>.</p>

<p>If you like this post also check out my new course <a href="/vue-component-patterns-course.html">Vue.js Component Patterns Course</a>.</p>

<p>Stay tuned for my upcoming post about headless components!</p>

  </div>

  <ul class="share-menu">
    <li>
      <a href="https://twitter.com/intent/tweet/?text=Checkout+this+article%3A+&url=http://127.0.0.1%2F2018%2F09%2F13%2Fvue-js-component-composition-with-scoped-slots.html&via=fdietz" target="_blank">
        <svg viewBox="0 0 12 12" preserveAspectRatio="xMidYMid meet" class="svg-icon svg-icon-twitter">
          <path class="svg-icon-path" d="M10.8,3.5c0,0.1,0,0.2,0,0.3c0,3.3-2.5,7-7,7c-1.4,0-2.7-0.3-3.8-1c0.2,0,0.4,0,0.6,0c1.1,0,2.2-0.5,3.1-1.2 c-1.1,0-2-0.7-2.3-1.7c0.2,0,0.3,0,0.5,0s0.4,0,0.7-0.1c-1.1-0.2-2-1.2-2-2.4l0,0c0.3,0.2,0.7,0.3,1.1,0.3C1,4.3,0.6,3.5,0.6,2.7 c0-0.5,0.1-0.8,0.3-1.2c1.2,1.6,3,2.5,5,2.6c0-0.2-0.1-0.4-0.1-0.6c0-1.3,1.1-2.4,2.5-2.4c0.7,0,1.4,0.3,1.8,0.8 c0.6-0.1,1.1-0.3,1.6-0.6c-0.2,0.6-0.6,1.1-1.1,1.4c0.5-0.1,1-0.2,1.4-0.4C11.7,2.8,11.2,3.2,10.8,3.5z"></path>
        </svg>
      </a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=http://127.0.0.1%2F2018%2F09%2F13%2Fvue-js-component-composition-with-scoped-slots.html" target="_blank" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
        <svg viewBox="0 0 12 12" preserveAspectRatio="xMidYMid meet" class="svg-icon svg-icon-facebook">
          <path class="svg-icon-path" d="M9.1,0.1V2H8C7.6,2,7.3,2.1,7.1,2.3C7,2.4,6.9,2.7,6.9,3v1.4H9L8.8,6.5H6.9V12H4.7V6.5H2.9V4.4h1.8V2.8 c0-0.9,0.3-1.6,0.7-2.1C6,0.2,6.6,0,7.5,0C8.2,0,8.7,0,9.1,0.1z"></path>
        </svg>
      </a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=http://127.0.0.1%2F2018%2F09%2F13%2Fvue-js-component-composition-with-scoped-slots.html" target="_blank" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">
        <svg viewBox="0 0 12 12" preserveAspectRatio="xMidYMid meet" class="svg-icon svg-icon-google">
          <path class="svg-icon-path" d="M5.4,5.7c0,0.2,0.1,0.3,0.2,0.5c0.2,0.2,0.3,0.3,0.6,0.5s0.4,0.3,0.7,0.5C7,7.5,7.2,7.7,7.4,8 c0.2,0.3,0.2,0.6,0.2,1c0,0.4-0.1,0.8-0.3,1.2c-0.3,0.6-0.9,1-1.5,1.3S4.3,12,3.6,12c-0.6,0-1.2-0.1-1.8-0.3s-1-0.5-1.2-1 c-0.2-0.3-0.3-0.6-0.3-0.9c0-0.4,0.1-0.7,0.3-1.1c0.2-0.3,0.5-0.6,0.9-0.8c0.6-0.4,1.6-0.6,2.9-0.7C4.2,6.9,4.1,6.8,4,6.6 C4,6.4,3.9,6.3,3.9,6.1c0-0.2,0.1-0.4,0.2-0.6c-0.2,0-0.4,0-0.5,0c-0.7,0-1.3-0.2-1.8-0.7C1.3,4.3,1.1,3.7,1.1,3 c0-0.4,0.1-0.8,0.3-1.1S1.7,1.2,2,0.9c0.4-0.3,0.8-0.6,1.3-0.7C3.9,0.1,4.4,0,4.9,0h3l-1,0.6H6c0.4,0.3,0.6,0.6,0.8,1 s0.3,0.7,0.3,1.2c0,0.3-0.1,0.7-0.2,0.9C6.8,4,6.6,4.2,6.5,4.4C6.3,4.5,6.1,4.7,6,4.8C5.8,5,5.7,5.1,5.5,5.3 C5.4,5.4,5.4,5.6,5.4,5.7z M4.3,11.3c0.3,0,0.5,0,0.8-0.1c0.3-0.1,0.5-0.2,0.7-0.3c0.2-0.1,0.4-0.3,0.5-0.5c0.1-0.2,0.2-0.5,0.2-0.8 c0-0.1,0-0.2-0.1-0.4S6.5,9.1,6.4,9c0-0.1-0.1-0.2-0.2-0.3C6.1,8.6,6.1,8.5,6,8.4c0-0.1-0.1-0.1-0.3-0.2C5.6,8.1,5.5,8,5.5,8 c0,0-0.1-0.1-0.3-0.2C5,7.7,4.9,7.6,4.9,7.6c-0.1,0-0.2,0-0.3,0c-0.3,0-0.5,0-0.8,0.1S3.3,7.7,3,7.8C2.8,7.9,2.5,8,2.3,8.1 C2.1,8.3,2,8.4,1.8,8.7C1.7,8.9,1.6,9.1,1.6,9.4c0,0.3,0.1,0.6,0.3,0.9c0.2,0.3,0.4,0.5,0.7,0.6c0.3,0.1,0.6,0.2,0.9,0.3 S4,11.3,4.3,11.3z M4.3,5c0.2,0,0.4,0,0.6-0.1c0.2-0.1,0.3-0.2,0.5-0.3C5.6,4.3,5.7,4,5.7,3.5c0-0.3,0-0.6-0.1-0.9 C5.5,2.2,5.4,1.9,5.3,1.6C5.1,1.3,4.9,1.1,4.7,0.9S4.1,0.6,3.8,0.6c-0.2,0-0.4,0-0.6,0.1C3,0.8,2.9,1,2.7,1.1 C2.5,1.4,2.4,1.8,2.4,2.3c0,0.2,0,0.5,0.1,0.7c0,0.2,0.1,0.5,0.2,0.7C2.8,4,2.9,4.2,3.1,4.4c0.1,0.2,0.3,0.4,0.5,0.5 C3.8,5,4.1,5,4.3,5z M10.2,5h1.5v0.8h-1.5v1.6H9.4V5.8H7.9V5h1.5V3.5h0.8V5z"></path>
        </svg>
      </a>
    </li>
  </ul>
</div>

<!--
<div class="related-posts">
  <h3>Related Posts</h3>
  <ul class="posts">
    
      <li>
        <a href="/2018/09/05/vue-js-component-composition-with-slots.html">Vue.js Component Composition with Slots</a>
        <span class="date">05 Sep 2018</span>
      </li>
    
      <li>
        <a href="/2018/08/23/introduction-to-vue-js-components.html">Introduction to Components with Vue.js</a>
        <span class="date">23 Aug 2018</span>
      </li>
    
      <li>
        <a href="/2018/08/16/published-vue-js-component-patterns-course.html">Published Vue.js Component Patterns Course</a>
        <span class="date">16 Aug 2018</span>
      </li>
    
  </ul>
</div>
-->


    <footer>
      Copyright 2018 Frederik Dietz
      |
      <a href="http://feeds.feedburner.com/fdietz"> RSS </a>
      |
      <a href="http://twitter.com/fdietz/">@fdietz</a>
    </footer>

    <script src="/assets/application-d4378cd6e29b71700aea7f8091bc6235159c3b312fcb6b20a9e872e40b6c7521.js" type="text/javascript"></script>

    <!-- Google Analytics -->
    <script>
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script>
    var pageTracker = _gat._getTracker("UA-24857075-1");
    pageTracker._trackPageview();
    </script>
    <!-- Google Analytics end -->

    <!--[if lt IE 7 ]>
    	<script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.2/CFInstall.min.js"></script>
    	<script>window.attachEvent("onload",function(){CFInstall.check({mode:"overlay"})})</script>
    <![endif]-->

  </body>
</html>
