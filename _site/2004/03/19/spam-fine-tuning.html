<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="author" content="Frederik Dietz" />
  <meta name="description" content="Frederik Dietz My Blog">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Spam fine tuning</title>

  <link href="http://feeds.feedburner.com/fdietz" rel="alternate" title="Frederik Dietz" type="application/atom+xml" />

  <link rel="stylesheet" href="/css/style.css">

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <script src="/js/libs/modernizr-2.0.6.min.js"></script>

</head>

<body>

  <div id="container" class="site">

    <header class="title">
      <a href="/">Frederik Dietz</a>
      <a class="extra" href="/">home</a>
      <a class="extra" href="/archive.html">archive</a>
      <a class="extra" href="/projects.html">projects</a>
      <a class="extra" href="/books.html">books</a>
      <a class="extra" href="/about.html">about</a>
    </header>

    <div id="main" role="main">
      

<div id="post">
  <h2><a class="post-title" href="/2004/03/19/spam-fine-tuning.html">Spam fine tuning</a></h2>
  <div class="date">published 19 Mar 2004</div>

  <p>Waking up this morning I recognized that I&#8217;ve forgotten something really important for the token database.I&#8217;m using MD5 sums to detect already learned messages. These shouldn&#8217;t be added to the token database twice or more times - just once. When marking messages as spam, which are non spam, Columba should use this MD5 sum to correct the value, if the user marks the message as non spam.You can imagine that this MD5 message list is getting hugh over time. So, I&#8217;ve added a timestamp for every MD5 sum. This way, cleaning up the token database is very easy because I can just remove old messages.Sadly, this means that the spam.db file format has changed a bit.Another new thing are handcrafted rules. This is pretty new, I&#8217;ve got it from a paper &#8220;A bayesian approach to filtering junk email&#8221; from Sahami et. al.In Columba I&#8217;ve basically eliminated the need for something like a training mode with these rules. The idea is pretty easy. The bayesian classifier enables us to add handcrafted rules, which are handled equally to other tokens. So, a rule just adds another probability additionally to the word probabilities.When starting from scratch you don&#8217;t have any words in your token database. The spam engine can&#8217;t detect spam messages until you trained it for some time. But the handcrafted rules are in place, giving you a good start to determine spam messages, until you have collected enough tokens using the message contents.One such rule would be for example checking if the Subject is of capital letters only, or if the Subject contains many whitespaces. You can think if many more rules. Spamassassin has a very big list of rules which can be found <a href='http://www.spamassassin.org/tests.html'>here</a>. Adding new rules is very easy. Just subclass AbstractRule in org.columba.mail.spam.rules.</p>
</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>05 May 2013</span> &raquo; <a href="/2013/05/05/recipes-with-angular-js-update-available.html">Recipes with Angular.js: Update available</a></li>
    
      <li><span>14 Apr 2013</span> &raquo; <a href="/2013/04/14/team-dashboard-2-release-candidate-2.html">Team Dashboard 2 Release Candidate 2</a></li>
    
      <li><span>16 Mar 2013</span> &raquo; <a href="/2013/03/16/team-dashboard-2-release-candidate.html">Team Dashboard 2 Release Candidate</a></li>
    
  </ul>
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'fdietzgithubcom'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

  	</div>

    <footer class="footer">
      <div class="contact">
        <p>
          Frederik Dietz<br />
        </p>
      </div>
      <div class="contact">
        <p>
          <a href="http://github.com/fdietz/">github.com/fdietz</a><br />
          <a href="http://twitter.com/fdietz/">twitter.com/fdietz</a><br />
        </p>
      </div>
      <div class="rss">
        <a href="http://feeds.feedburner.com/fdietz">
          <img src="/images/rss.png" alt="Subscribe to RSS Feed" />
        </a>
      </div>
    </footer>

    <a href="http://github.com/fdietz"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>

  </div>

  <!-- Google Analytics -->
  <script>
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script>
  var pageTracker = _gat._getTracker("UA-24857075-1");
  pageTracker._trackPageview();
  </script>
  <!-- Google Analytics end -->

  <!--[if lt IE 7 ]>
  	<script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.2/CFInstall.min.js"></script>
  	<script>window.attachEvent("onload",function(){CFInstall.check({mode:"overlay"})})</script>
  <![endif]-->

</body>
</html>
