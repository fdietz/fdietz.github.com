
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>My Blog: Spam fine tuning</title>
  <meta name="author" content="Frederik Dietz">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="canonical" href="http://fdietz.github.com/blog/2004/03/19/spam-fine-tuning/"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
  
  <link href="/atom.xml" rel="alternate" title="My Blog" type="application/atom+xml"/>
  

  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


</head>

<body  >
  <header><hgroup>
  <h1><a href="/">My Blog</a></h1>
  
    <h2>A blogging framework for hackers.</h2>
  
</hgroup>
</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:fdietz.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry">
  
  <header>
    
      <h1 class="entry-title">Spam Fine Tuning</h1>
    
    
      <p class="meta">




<time datetime="2004-03-19 00:00:00 +0100" pubdate  updated >Mar 19<span>th</span>, 2004</time>


</p>
    
  </header>


<div class="entry-content"><p>Waking up this morning I recognized that I&#8217;ve forgotten something really important for the token database.I&#8217;m using MD5 sums to detect already learned messages. These shouldn&#8217;t be added to the token database twice or more times - just once. When marking messages as spam, which are non spam, Columba should use this MD5 sum to correct the value, if the user marks the message as non spam.You can imagine that this MD5 message list is getting hugh over time. So, I&#8217;ve added a timestamp for every MD5 sum. This way, cleaning up the token database is very easy because I can just remove old messages.Sadly, this means that the spam.db file format has changed a bit.Another new thing are handcrafted rules. This is pretty new, I&#8217;ve got it from a paper &#8220;A bayesian approach to filtering junk email&#8221; from Sahami et. al.In Columba I&#8217;ve basically eliminated the need for something like a training mode with these rules. The idea is pretty easy. The bayesian classifier enables us to add handcrafted rules, which are handled equally to other tokens. So, a rule just adds another probability additionally to the word probabilities.When starting from scratch you don&#8217;t have any words in your token database. The spam engine can&#8217;t detect spam messages until you trained it for some time. But the handcrafted rules are in place, giving you a good start to determine spam messages, until you have collected enough tokens using the message contents.One such rule would be for example checking if the Subject is of capital letters only, or if the Subject contains many whitespaces. You can think if many more rules. Spamassassin has a very big list of rules which can be found <a href="http://www.spamassassin.org/tests.html">here</a>.   Adding new rules is very easy. Just subclass AbstractRule in org.columba.mail.spam.rules.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Frederik Dietz</span></span>

      




<time datetime="2004-03-19 00:00:00 +0100" pubdate  updated >Mar 19<span>th</span>, 2004</time>



      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://fdietz.github.com/blog/2004/03/19/spam-fine-tuning/" data-via="fdietz" data-counturl="http://fdietz.github.com/blog/2004/03/19/spam-fine-tuning/" >Tweet</a>
  
  
  <g:plusone size="medium"></g:plusone>
  
</div>

    
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread"><div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'fdietz';
  var disqus_identifier = 'http://fdietz.github.com/blog/2004/03/19/spam-fine-tuning/';
  var disqus_url = 'http://fdietz.github.com/blog/2004/03/19/spam-fine-tuning/';
  //var disqus_developer = 1;
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

      
        <aside role=sidebar><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2009/09/27/caffeinated-simpleton-%25c2%25bb-blog-archive-%25c2%25bb-an-introduction-to-javascript%25e2%2580%2599s-%25e2%2580%259cthis%25e2%2580%259d/">Caffeinated Simpleton  Â» Blog Archive  Â» An Introduction to JavaScriptâs âthisâ</a>
      </li>
    
      <li class="post">
        <a href="/blog/2009/09/19/adding-columns-to-large-mysql-tables-quickly/">Adding Columns to large MySQL Tables Quickly</a>
      </li>
    
      <li class="post">
        <a href="/blog/2009/09/08/state-of-the-couch/">State of the Couch</a>
      </li>
    
      <li class="post">
        <a href="/blog/2009/09/07/why-should-i-use-ruby-config-instead-of/">Why should I use ruby-config instead of ...</a>
      </li>
    
      <li class="post">
        <a href="/blog/2009/09/07/very-nice-vector-drawing-using-javascrip/">Very nice vector drawing using javascrip...</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("fdietz", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/fdietz" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @fdietz</a>
  
</section>



<section>
  <h1>On Delicious</h1>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/js/fdietz?title=&count=3&sort=date&extended"></script>
  <p><a href="http://delicious.com/fdietz">My Delicious Bookmarks &raquo;</a></p>
</section>




</aside>
      
    </div>
  </div>
  <footer><p>
  Copyright &copy; 2011 - Frederik Dietz -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
</footer>
</body>
</html>
